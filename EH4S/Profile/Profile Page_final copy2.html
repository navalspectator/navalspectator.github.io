<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Updated Profile Page with Improved Visibility and Mailbox Icon</title>
    <link rel="stylesheet" href="eh4s.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            padding: 20px;
            padding-top: 84px; /* Adjusted to account for fixed header + padding */
        }

        /* Navigation Bar Styles */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: var(--background-white-ffffff, #fff);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 16px 24px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 64px;
            box-sizing: border-box;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            gap: 12px;
        }

        .logo img {
            height: 32px;
            width: auto;
        }

        .logo .text {
            font-family: var(--font-family-roboto, Arial);
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }

        .nav {
            display: flex;
            gap: 32px;
            margin: 0 48px;
        }

        .nav a {
            text-decoration: none;
            color: var(--neutral-dark, #333);
            font-family: var(--font-family-roboto, Arial);
            font-size: 14px;
            padding: 8px 0;
            position: relative;
        }

        .nav a:hover {
            color: var(--primary, #0056b3);
        }

        .nav a:hover::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--primary, #0056b3);
        }

        /* Profile Container Styles */
        .profile-container {
            display: flex;
            align-items: center;
            gap: 16px;
            position: relative;
        }

        .icon {
            position: relative;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background-color: #D4670B;
            color: white;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 10px;
            font-family: var(--font-family-roboto, Arial);
        }

        .dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: #fff;
            border: 1px solid var(--border2-e9e9ea, #e9e9ea);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            display: none;
            margin-top: 8px;
            padding: 8px 0;
            z-index: 100;
        }

        .dropdown.active {
            display: block;
        }

        .dropdown-item {
            padding: 8px 16px;
            font-family: var(--font-family-roboto, Arial);
            font-size: 14px;
            color: var(--neutral-dark, #333);
            cursor: pointer;
        }

        .dropdown-item:hover {
            background-color: #F5F5F5;
        }

        /* Existing Profile Page Styles */
        .container {
            display: flex;
            margin-top: 20px;
        }

        .sidebar {
            width: 250px;
            background: #fff;
            border-right: 1px solid #ddd;
            padding: 20px;
            border-radius: 8px;
        }

        .sidebar a {
            display: block;
            padding: 10px;
            color: #333;
            text-decoration: none;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .sidebar a.active {
            background-color: #0056b3;
            color: white;
        }

        .main-content {
            flex: 1;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-left: 20px;
        }

        /* Rest of your existing styles... */
        /* ... (keep all the existing profile page specific styles) ... */

        /* Add these styles to your existing style section */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .input-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .button {
            background-color: var(--primary, #0056b3);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }

        .button:hover {
            background-color: #004494;
        }

        .section h2 {
            margin-bottom: 20px;
            color: #333;
        }

        .input-group p {
            color: #666;
            margin-top: 5px;
            font-size: 14px;
        }

        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
        }

        .edit-icon {
            background-color: var(--primary, #0056b3);
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .edit-icon:hover {
            background-color: #004494;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            background-color: #f4f4f4;
            border-radius: 4px;
            cursor: pointer;
        }

        .tab.active {
            background-color: #0056b3;
            color: white;
        }

        .results-list,
        .grid-view {
            display: none;
        }

        .results-list.active,
        .grid-view.active {
            display: block;
        }

        .result-item,
        .grid-card {
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .grid-view {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }

        .post-item {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .post-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            text-align: center;
        }

        .modal-content img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 2px solid #777;
            margin-bottom: 20px;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        #fileInput {
            display: none;
        }

        .upload-btn,
        .remove-btn,
        .cancel-btn {
            background-color: var(--primary, #0056b3);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .upload-btn:hover,
        .remove-btn:hover,
        .cancel-btn:hover {
            background-color: #004494;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar Component -->
    <header class="header">
        <a href="main-page.html" class="logo">
            <img src="eh4s_logo.png" alt="EH4S Logo">
            <span class="text">EuroHub4Sino</span>
        </a>
        
        <nav class="nav">
            <a href="main-page.html#publications">Publications</a>
            <a href="main-page.html#marketplace">Joint Marketplace</a>
            <a href="main-page.html#expert-enquiry">Expert Enquiry</a>
            <a href="main-page.html#library">Online Dynamic Library</a>
            <a href="main-page.html#communication">Communication</a>
        </nav>

        <div class="profile-container">
            <div class="icon" onclick="toggleDropdown('notificationDropdown')">
                🔔<span class="notification-badge">5</span>
            </div>
            <div class="dropdown" id="notificationDropdown">
                <div class="dropdown-item">New post in Global China</div>
                <div class="dropdown-item">Comment on your post</div>
                <div class="dropdown-item">System update</div>
                <div class="dropdown-item">Reminder: Post expiry</div>
            </div>

            <div class="icon" onclick="toggleDropdown('messageDropdown')">
                ✉️<span class="notification-badge">3</span>
            </div>
            <div class="dropdown" id="messageDropdown">
                <div class="dropdown-item">Message from John Doe</div>
                <div class="dropdown-item">New group message</div>
                <div class="dropdown-item">Message from Jane Smith</div>
            </div>

            <div class="profile-icon" onclick="toggleDropdown('profileDropdown')">
                👤
            </div>
            <div class="dropdown" id="profileDropdown">
                <div class="dropdown-item">Profile Information</div>
                <div class="dropdown-item">Settings & Privacy</div>
                <div class="dropdown-item">Library and Posts</div>
                <div class="dropdown-item">Preferences</div>
                <div class="dropdown-item">Help</div>
                <div class="dropdown-item">Log Out</div>
            </div>
        </div>
    </header>

    <!-- Keep your existing profile page content -->
    <div class="container">
        <div class="sidebar">
            <a href="#" onclick="showSection('profileInfo')" class="active">Profile Information</a>
            <a href="#" onclick="showSection('settingsPrivacy')">Settings & Privacy</a>
            <a href="#" onclick="showSection('bookmarks')">Bookmarks</a>
            <a href="#" onclick="showSection('myPosts')">My Posts</a>
            <a href="#" onclick="showSection('preferences')">Preferences</a>
            <a href="#" onclick="showSection('help')">Help</a>
        </div>
        
        <!-- Keep your existing main content sections -->
        <div class="main-content">
            <!-- Profile Information Section -->
            <div class="section active" id="profileInfo">
                <h2>Profile Information</h2>
                <div class="input-group">
                    <label for="profilePic">Profile Picture</label>
                    <div class="profile-container">
                        <img id="profilePic" src="https://via.placeholder.com/150/555/eee?text=Profile" alt="Profile Picture" class="profile-pic">
                        <button class="edit-icon" onclick="openModal()">✏️ Edit</button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" placeholder="First Name">
                </div>
                <div class="input-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" placeholder="Last Name">
                </div>
                <div class="input-group">
                    <label for="userType">User Type</label>
                    <input type="text" id="userType" value="Member - Researcher" disabled>
                </div>
                <div class="input-group">
                    <label for="bio">Bio</label>
                    <textarea id="bio" placeholder="Write your bio..."></textarea>
                </div>
                <div class="input-group">
                    <label for="pronouns">Pronouns</label>
                    <select id="pronouns">
                        <option value="she/her">She/Her</option>
                        <option value="he/him">He/Him</option>
                        <option value="they/them">They/Them</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="organisation">Organisation</label>
                    <input type="text" id="organisation" placeholder="Organisation">
                </div>
                <div class="input-group">
                    <label for="sector">Sector</label>
                    <input type="text" id="sector" placeholder="Sector">
                </div>
                <div class="input-group">
                    <label for="expertise">Area of Expertise</label>
                    <input type="text" id="expertise" placeholder="Area of Expertise">
                </div>
                <div class="input-group">
                    <label for="linkedin">LinkedIn</label>
                    <input type="url" id="linkedin" placeholder="LinkedIn URL">
                </div>
                <div class="input-group">
                    <label for="researchGate">ResearchGate</label>
                    <input type="url" id="researchGate" placeholder="ResearchGate URL">
                </div>
                <button class="button">Save Changes</button>
                <button class="button">Profile Preview</button>
            </div>

            <!-- Settings & Privacy Section -->
            <div class="section" id="settingsPrivacy">
                <h2>Settings & Privacy</h2>
                <div class="input-group">
                    <label>Social Logins</label>
                    <p>Connect or disconnect accounts (Apple, Google, Microsoft, LinkedIn).</p>
                </div>
                <div class="input-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" placeholder="Email Address">
                </div>
                <div class="input-group">
                    <label>Password Management</label>
                    <button class="button">Change Password</button>
                    <button class="button">Reset Password</button>
                </div>
                <div class="input-group">
                    <label>Two-Factor Authentication (2FA) & Passkeys</label>
                    <p>Setup instructions for 2FA using authenticator apps or passkeys.</p>
                </div>
                <div class="input-group">
                    <label>Privacy Controls</label>
                    <p>Manage your visibility in the Expert Enquiry Tool (EET).</p>
                    <p id="statusLabel">Visibility in Expert Enquiry Tool: Visible</p>
                    <button id="visibilityButton" class="opt-button opt-in" onclick="toggleModal()">Hide my profile</button>
                    <p id="helperText" class="helper-text">You can change your visibility status at any time.</p>
                </div>

                <!-- Confirmation Modal -->
                <div class="overlay" id="overlay"></div>
                <div class="modal" id="confirmationModal">
                    <p id="modalText">Are you sure you want to opt out?</p>
                    <div class="modal-buttons">
                        <button class="confirm" onclick="confirmToggle()">I understand the consequences, hide my profile</button>
                        <button class="cancel" onclick="closeModal()">Cancel</button>
                    </div>
                </div>

                <script>
                    let visibilityStatus = true; // true = Visible, false = Hidden

                    function updateUI() {
                        const statusLabel = document.getElementById("statusLabel");
                        const visibilityButton = document.getElementById("visibilityButton");
                        const helperText = document.getElementById("helperText");

                        if (visibilityStatus) {
                            statusLabel.textContent = "Visibility in Expert Enquiry Tool: Visible";
                            visibilityButton.textContent = "Hide my profile";
                            visibilityButton.classList.remove("opt-out");
                            visibilityButton.classList.add("opt-in");
                            helperText.textContent = "You can change your visibility status at any time.";
                        } else {
                            statusLabel.textContent = "Visibility in Expert Enquiry Tool: Hidden";
                            visibilityButton.textContent = "Make my profile visible";
                            visibilityButton.classList.remove("opt-in");
                            visibilityButton.classList.add("opt-out");
                            helperText.textContent = "You can make your profile visible again at any time.";
                        }
                    }

                    function toggleModal() {
                        const modalText = document.getElementById("modalText");
                        modalText.textContent = visibilityStatus ?
                            "After hiding your profile from the Expert Enquiry Tool:\n\n- Your profile will no longer be visible.\n- Other members cannot find or contact you through EET.\n- You can still search for and contact other experts.\n- You can make your profile visible again anytime in Settings & Privacy." :
                            "Your profile will be visible in the Expert Enquiry Tool to other members of the EH4S Platform. Do you want to continue?";

                        document.getElementById("confirmationModal").style.display = "block";
                        document.getElementById("overlay").style.display = "block";
                    }

                    function closeModal() {
                        document.getElementById("confirmationModal").style.display = "none";
                        document.getElementById("overlay").style.display = "none";
                    }

                    function confirmToggle() {
                        visibilityStatus = !visibilityStatus;
                        updateUI();
                        closeModal();

                        const snackbar = document.createElement("div");
                        snackbar.textContent = visibilityStatus ?
                            "✅ Your profile is now visible in the Expert Enquiry Tool." :
                            "✅ You have successfully hidden your profile in the Expert Enquiry Tool.";
                        snackbar.style.position = "fixed";
                        snackbar.style.bottom = "20px";
                        snackbar.style.left = "50%";
                        snackbar.style.transform = "translateX(-50%)";
                        snackbar.style.backgroundColor = "#333";
                        snackbar.style.color = "#fff";
                        snackbar.style.padding = "10px 20px";
                        snackbar.style.borderRadius = "5px";
                        snackbar.style.boxShadow = "0 2px 5px rgba(0, 0, 0, 0.2)";
                        snackbar.style.zIndex = "1000";
                        document.body.appendChild(snackbar);

                        setTimeout(() => snackbar.remove(), 10000);
                    }

                    document.addEventListener("DOMContentLoaded", updateUI);
                </script>
            </div>

            <!-- Bookmarks Section -->
            <div class="section" id="bookmarks">
                <h2>Bookmarks</h2>
                <div class="tabs">
                    <div class="tab active" onclick="showTab('jmp')">JMP</div>
                    <div class="tab" onclick="showTab('odl')">ODL</div>
                    <div class="tab" onclick="showTab('eet')">EET</div>
                    <div class="tab" onclick="showTab('vitrine')">Vitrine</div>
                </div>
                <div class="results-list" id="jmp">
                    <div class="result-item">📄 JMP Research Paper 1</div>
                    
                </div>
                <div class="results-list" id="odl" style="display:none;">
                    <div class="result-item">📄 ODL Whitepaper</div>
                </div>
                <div class="results-list" id="eet" style="display:none;">
                    <div class="result-item">📄 EET Innovation Report</div>
                </div>
                <div class="grid-view" id="vitrine" style="display:none;">
                    <div class="grid-card">📰 Vitrine Article 1</div>
                    <div class="grid-card">📰 Vitrine Article 2</div>
                    <div class="grid-card">📰 Vitrine Article 3</div>
                    <div class="grid-card">📰 Vitrine Article 4</div>
                    <div class="grid-card">📰 Vitrine Article 5</div>
                </div>
            </div>

            <!-- My Posts Section -->
            <div class="section" id="myPosts">
                <h2>My JMP Posts</h2>
                <div class="input-group">
                    <label>You can View your postson JMP.</label>
                </div>
                <div class="post-item">
                    <h3>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h3>
                    <p>by Lorem ipsum • 20 April 2023 • News</p>
                    <p>Duis orci nisl, vulputate interdum feugiat eu, eleifend vitae lorem. Pellentesque finibus quam ac ultrices sollicitudin. Ut odio sem, porttitor eget maximus sit amet, rutrum at urna. Nam tincidunt semper sem eu bibendum. Nullam congue velit nulla, sit amet aliquam lacus sollicitudin id.</p>
                    <div class="post-footer">
                        <button class="button">Full Text</button>
                    </div>
                </div>
            </div>

            <!-- Preferences Section -->
            <div class="section" id="preferences">
                <h2>Preferences</h2>
                <div class="input-group">
                    <label>Notification Settings</label>
                    <p>Customize your notification preferences.</p>
                </div>
                <div class="input-group">
                    <label for="language">Language</label>
                    <select id="language">
                        <option value="en">English</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="theme">Theme</label>
                    <select id="theme">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="high-contrast">High Contrast</option>
                    </select>
                </div>
            </div>

            <!-- Help Section -->
            <div class="section" id="help">
                <h2>Help</h2>
                <p>Access the help center, FAQs, or contact support for assistance.</p>
                <button class="button">Submit Feedback</button>
            </div>
        </div>
    </div>

    <!-- Integrated Profile Picture Modal and Functionality -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <h3>Update Profile Picture</h3>
            <img id="modalProfilePic" src="https://via.placeholder.com/150/555/eee?text=Profile" alt="Profile Picture">
            <div class="modal-buttons">
                <input type="file" id="fileInput" accept="image/*" onchange="changeProfilePic(event)">
                <button class="upload-btn" onclick="document.getElementById('fileInput').click()">Upload New Photo</button>
                <button class="remove-btn" onclick="removeProfilePic()">Remove Photo</button>
                <button class="cancel-btn" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Combined dropdown and section toggle functionality
        function toggleDropdown(dropdownId) {
            // Close all dropdowns first
            document.querySelectorAll('.dropdown').forEach(dropdown => {
                if (dropdown.id !== dropdownId) {
                    dropdown.classList.remove('active');
                }
            });

            // Toggle the clicked dropdown
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.toggle('active');
        }

        function showSection(sectionId) {
            // Remove active class from all sections and sidebar links
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.sidebar a').forEach(link => {
                link.classList.remove('active');
            });

            // Add active class to selected section and sidebar link
            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`.sidebar a[onclick="showSection('${sectionId}')"]`).classList.add('active');
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.profile-container')) {
                document.querySelectorAll('.dropdown').forEach(dropdown => {
                    dropdown.classList.remove('active');
                });
            }
        });

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Profile page initialized");
            showSection('profileInfo'); // Show profile information by default
        });

        function showTab(tabId) {
            document.querySelectorAll('.results-list, .grid-view').forEach(tab => {
                tab.style.display = 'none';
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabId).style.display = 'block';
            document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Profile page initialized");
            showSection('profileInfo'); // Show profile information by default
        });

        function openModal() {
            document.getElementById("profileModal").style.display = "block";
            document.getElementById("modalProfilePic").src = document.getElementById("profilePic").src;
        }

        function closeModal() {
            document.getElementById("profileModal").style.display = "none";
        }

        function changeProfilePic(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    document.getElementById("profilePic").src = e.target.result;
                    document.getElementById("modalProfilePic").src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
            closeModal();
        }

        function removeProfilePic() {
            const defaultPic = "https://via.placeholder.com/150/555/eee?text=Profile";
            document.getElementById("profilePic").src = defaultPic;
            document.getElementById("modalProfilePic").src = defaultPic;
            closeModal();
        }
    </script>
</body>
</html>
